{% extends "base.html" %}

{% block title %}Dashboard Registro{% endblock %}

{% block content %}
<div class="dashboard-container">
    <div class="dashboard-header">
        <h2>Panel de Registro de Pacientes</h2>
    </div>

    <div class="registro-grid">
        <div id="doctorsCards" class="doctors-cards">
            <div class="loading">Cargando doctores...</div>
        </div>
    </div>
</div>

<!-- Modal Registrar Paciente -->
<div class="modal" id="registerPatientModal">
    <div class="modal-content">
        <h2>Registrar Paciente</h2>
        <form id="registerPatientForm" onsubmit="registerPatient(event)">
            <input type="hidden" name="doctor_id" id="selectedDoctorId">
            <div class="form-group">
                <label>Doctor</label>
                <input type="text" id="selectedDoctorName" readonly>
            </div>
            <div class="form-group">
                <label>Nombre del Paciente</label>
                <input type="text" name="patient_name" placeholder="Nombre completo" required autofocus>
            </div>
            <div class="modal-actions">
                <button type="submit" class="btn-primary">Registrar</button>
                <button type="button" class="btn-secondary" onclick="hideModal('registerPatientModal')">Cancelar</button>
            </div>
        </form>
    </div>
</div>

<!-- Modal Código Generado -->
<div class="modal" id="codeModal">
    <div class="modal-content text-center">
        <h2>Paciente Registrado</h2>
        <div class="generated-code">
            <p>Código asignado:</p>
            <h1 id="generatedCode" class="code-display"></h1>
        </div>
        <button class="btn-primary" onclick="hideModal('codeModal')">Cerrar</button>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/registro.js') }}"></script>
{% endblock %}
